{% extends '@ShopsysFramework/Admin/Grid/Grid.html.twig' %}

{% block grid_no_data %}
    {{ 'No cron runs found.'|trans }}
{% endblock %}

{% block grid_value_cell_id_startedAt %}
    {% set expectedMaximumRunTime = constant('Shopsys\\FrameworkBundle\\Controller\\Admin\\DefaultController::EXPECTED_MAXIMUM_CRON_RUNTIME_IN_SECONDS') %}

    {% if row.duration > expectedMaximumRunTime %}
        <span style="color: rgb(220, 61, 61)">
    {% endif %}

    {{ value|formatDateTime}}

    {% if row.duration > expectedMaximumRunTime %}
        </span>
    {% endif %}
{% endblock %}

{% block grid_value_cell_id_finishedAt %}
    {% set expectedMaximumRunTime = constant('Shopsys\\FrameworkBundle\\Controller\\Admin\\DefaultController::EXPECTED_MAXIMUM_CRON_RUNTIME_IN_SECONDS') %}

    {% if row.duration > expectedMaximumRunTime %}
        <span style="color: red;">
    {% endif %}

    {{ value|formatDateTime}}

    {% if row.duration > expectedMaximumRunTime %}
        </span>
    {% endif %}

{% endblock %}

{% block grid_value_cell_id_duration %}
    {% set expectedMaximumRunTime = constant('Shopsys\\FrameworkBundle\\Controller\\Admin\\DefaultController::EXPECTED_MAXIMUM_CRON_RUNTIME_IN_SECONDS') %}

    {% if row.duration > expectedMaximumRunTime %}
        <span style="color: red;">
    {% endif %}

    {{ value}}

    {% if row.duration > expectedMaximumRunTime %}
        </span>
    {% endif %}

{% endblock %}

{% block grid_value_cell_id_status %}
    <strong style="line-break: inherit;">
        {% if row.status == constant('Shopsys\\FrameworkBundle\\Component\\Cron\\CronModule::CRON_STATUS_ERROR') %}
            <span style="color: red;"><i class="svg svg-warning"></i> {{ 'Error'|trans }}</span>
        {% else %}
            <span style="color: green;"><i class="svg svg-checked"></i> {{ 'Ok'|trans }}</span>
        {% endif %}
    </strong>
{% endblock %}
