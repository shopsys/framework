{% block complaint_items_widget %}
    <div class="wrap-divider">
        <div class="form-line form-line--no-padd">
            <div class="table-touch-always">
                {{ form_errors(form) }}
                <div class="table-touch-always__in">
                    <table class="table-main table-main--with-inline-form table-fixed">
                        <thead>
                            <tr>
                                <th class="table-col-200px">{{ 'Name'|trans }}</th>
                                <th class="table-col-375px">{{ 'Description'|trans }}</th>
                                <th>{{ 'Quantity'|trans }}</th>
                                <th>{{ 'Files'|trans }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for complaintItemId, complaintItemForm in form.children %}
                                {% set orderItem = complaintItemForm.vars.value.orderItem %}
                                {% set files = complaintItemForm.vars.value.files %}
                                <tr id="{{ complaintItemForm.vars.id }}" data-index="{{ complaintItemId }}">
                                    <td>
                                        {% if orderItem.product %}
                                            <a href="{{ path('admin_product_edit', { id: orderItem.product.id }) }}" class="in-icon font-size-12" target="_blank">
                                                {{ orderItem.name }}
                                                <i class="svg svg-arrow-simple in-icon in-icon--detail"></i>
                                            </a>
                                        {% else %}
                                            <span class="font-size-12">{{ orderItem.name }}</span>
                                            <i class="in-icon svg svg-question js-tooltip" data-toggle="tooltip" data-placement="top" title="{{ 'Product not in e-shop.'|trans }}"></i>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {{ form_widget(complaintItemForm.description) }}
                                        {{ form_errors(complaintItemForm.description, {errors_attr: { inline: false }}) }}
                                    </td>
                                    <td>
                                        {{ form_widget(complaintItemForm.quantity) }}
                                        {{ form_errors(complaintItemForm.quantity, {errors_attr: { inline: false }}) }}
                                    </td>
                                    <td>
                                        {% for file in files.orderedFiles %}
                                            {% if customerUploadedFileExists(file) %}
                                                <a href="{{ customerUploadedFileUrl(file) }}" target="_blank">{{ file.name }}.{{ file.extension }}</a>
                                            {% else %}
                                                {{ file.name }}
                                            {% endif %}
                                            {% if not loop.last %}, {% endif %}
                                        {% endfor %}
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
